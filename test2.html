<html>
<head>
    <meta charset="UTF-8">
    <script language="JavaScript">
        function parseHttpHeaders(httpHeaders) {
            return httpHeaders
                .split("\n")
                .map(x => x.split(/: */, 2))
                .filter(x => x[0])
                .reduce((ac, x) => {
                    ac[x[0]] = x[1];
                    return ac;
                }, {});
        }
        
        function getHeader() {
            var req = new XMLHttpRequest();
            req.open('GET', document.location, false);
            req.send(null);
            var headers = parseHttpHeaders(req.getAllResponseHeaders());
            var $inHtml = document.getElementById("inHtml");
            $inHtml.innerHTML = "<PRE>" + headers + "</PRE>;      
        }
        
        function sendMessageAndroid(){
            window.Android.showToast('안녕하세요. Android 호출입니다.');
        }

        function sendMessageIOS(){
            var message = {
                'message': '안녕하세요. iOS 호출입니다.'
            };
            window.webkit.messageHandlers.iOSHandler.postMessage(message);
        }

        function showMessageOnLoad() {
            alert('페이지가 로딩되었습니다.');
        }
        
        getHeader();
        
    </script>
</head>    
<body onLoad="javascript:onLoad();">
    <p><span id="inHtml"></span></p>
    <p><a href="javascript:alert('안녕하세요');">1. Java script Alert</a></p>
    <p><a href="javascript:confirm('안녕하세요?');">2. Java script Confirm</a></p>
    <p><a href="myapp://host?message=안녕하세요">3. URL Scheme 방식</a> ( myapp://host?message=${message} )</p>
    <p><a href="javascript:sendMessageAndroid();">4-1. Android Java script Bridge 호출</a> ( window.Android.showToast(message), Bridge name = Android )</p>
    <p><a href="javascript:sendMessageIOS();">4-2. iOS Handler 호출</a> ( window.webkit.messageHandlers.iOSHandler.postMessage(message), Handler name = iOSHandler, message = json {'message': ${message}} ) </p>
</body>
</html>
